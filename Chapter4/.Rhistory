library(ggplot2)
library(xlsx)
library(reshape2)
ts91 = read.xlsx("../Piketty2014FiguresTables/Chapter3TablesFigures.xlsx",sheetName="TS3.1",rowIndex=9:19,colIndex=1:10,header=FALSE)
names(ts91) = c("year","france_francs_cur","france_euros_cur", "france_euros_2013", "france_cpi", "us_dollars_cur", "us_dollars_2013", "us_cpi")
ts31
ts31 = read.xlsx("../Piketty2014FiguresTables/Chapter3TablesFigures.xlsx",sheetName="TS3.1",rowIndex=9:19,colIndex=1:10,header=FALSE)
## Table TS9.1
tab = read.xlsx("../Piketty2014FiguresTables/Chapter3TablesFigures.xlsx",sheetName="TS3.1",rowIndex=9:19,colIndex=1:10,header=FALSE)
names(tab) =  c("year","nat","nat_land", "nat_house", "nat_dom", "nat_foreign", "public", "public_ass", "public_debt", "private")
f31dat <- tab[,c("year","nat_land", "nat_house", "nat_dom", "nat_foreign")]
names(f31dat) <- c("year","Agricultural land","Housing", "Other Domestic Capital", "Net foreign capital")
f31dat <- tab[,c("year","nat_land", "nat_house", "nat_dom", "nat_foreign")]
names(f31dat) <- c("year","Agricultural land","Housing", "Other Domestic Capital", "Net foreign capital")
# Make the data long for stacking
f31dat <- melt(f31dat, id.var="year")
head(f31dat)
qplot(year, wage, data=f31dat, geom="ribbon", position = "stack")
f31dat <- tab[,c("year","nat_land", "nat_house", "nat_dom", "nat_foreign")]
names(f31dat) <- c("year","Agricultural land","Housing", "Other Domestic Capital", "Net foreign capital")
# Make the data long for stacking
f31dat <- melt(f31dat, id.var="year")
names(f31dat) <- c("year","capital_type","percent")
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack")
ts11a = read.xlsx("../Piketty2014FiguresTables/Chapter1TablesFigures.xlsx",sheetName="TS1.1a",rowIndex=8:18,colIndex=c(1,8:12),header=FALSE)
names(ts11a) = c("year","world","europe","america","africa","asia")
ts11a[,2:6] = ts11a[,2:6]/ts11a$world*100
ts11a=subset(ts11a,select=-world)
ts11a = melt(ts11a,id.vars="year")
names(ts11a) = c("year","Country","worldOutput")
qplot(year,worldOutput,data=ts11a,fill=Country,geom="ribbon",position="stack",xlim=c(1700,2012),xlab="Year",ylab="Percent of World Output")
head(ts11a)
head(ts11a
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack",
fill = captal_type)
f31dat <- tab[,c("year","nat_land", "nat_house", "nat_dom", "nat_foreign")]
names(f31dat) <- c("year","Agricultural land","Housing", "Other Domestic Capital", "Net foreign capital")
# Make the data long for stacking
f31dat <- melt(f31dat, id.var="year")
names(f31dat) <- c("year","capital_type","percent")
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack",
fill = capital_type)
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack",
fill = capital_type, xlab= "year", ylab= "Value of National Capital (% National Income)") + scale_y_continuous(labels = percent)
f31dat <- tab[,c("year","nat_land", "nat_house", "nat_dom", "nat_foreign")]
names(f31dat) <- c("year","Agricultural land","Housing", "Other Domestic Capital", "Net foreign capital")
# Make the data long for stacking
f31dat <- melt(f31dat, id.var="year")
names(f31dat) <- c("year","capital_type","percent")
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack",
fill = capital_type, xlab= "year", ylab= "Value of National Capital (% National Income)") + scale_y_continuous(labels = percent)
library(scales)
f31dat <- tab[,c("year","nat_land", "nat_house", "nat_dom", "nat_foreign")]
names(f31dat) <- c("year","Agricultural land","Housing", "Other Domestic Capital", "Net foreign capital")
# Make the data long for stacking
f31dat <- melt(f31dat, id.var="year")
names(f31dat) <- c("year","capital_type","percent")
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack",
fill = capital_type, xlab= "year", ylab= "Value of National Capital (% National Income)") + scale_y_continuous(labels = percent)
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack",
fill = capital_type, xlab= "year", ylab= "Value of National Capital (% National Income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.1. Capital in Britain, 1700-2010")
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack",
fill = capital_type, xlab= "year", ylab= "Value of National Capital (% National Income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.1. Capital in Britain, 1700-2010") +
scale_y_continuous(breaks=seq(0,10), limits=c(0,10), name="Hourly minimum wage") + theme(legend.position="bottom")
f31dat <- tab[,c("year","nat_land", "nat_house", "nat_dom", "nat_foreign")]
names(f31dat) <- c("year","Agricultural land","Housing", "Other Domestic Capital", "Net foreign capital")
# Make the data long for stacking
f31dat <- melt(f31dat, id.var="year")
names(f31dat) <- c("year","capital_type","percent")
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack",
fill = capital_type, xlab= "year", ylab= "Value of National Capital (% National Income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.1. Capital in Britain, 1700-2010") + theme(legend.position="bottom")
head(f31dat$year)
head(tab)
f33dat <- tab[, ("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom="line", colour = capital_type, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position="bottom")
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom="line", colour = capital_type, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position="bottom")
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom="line", colour = Public_Capital, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position="bottom")
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom=c("line", "point"), shape = Public_Capital, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position="bottom")
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom=c("line", "point"), shape = Public_Capital, xlab= "Year", size =2, ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position="bottom")
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom=c("line", "point"), shape = Public_Capital, xlab= "Year", size=c(1,2), ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position="bottom")
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom=c("point"), shape = Public_Capital, xlab= "Year", size=c(1,2), size = 2ylab= "Public assets and debt (% national income)")+ geom_line() + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position="bottom")
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom=c("point"), shape = Public_Capital, xlab= "Year", size=c(1,2), size = 2, ylab= "Public assets and debt (% national income)")+ geom_line() + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position="bottom")
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom=c("point"), shape = Public_Capital, xlab= "Year", size = 2, ylab= "Public assets and debt (% national income)")+ geom_line() + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position="bottom")
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom="line", colour = Public_Capital, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position="bottom")
qplot(year, percent, data=f33dat, geom="line", colour = Public_Capital, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position=c(0, 0))
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom="line", colour = Public_Capital, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position=c(0.5, 1))
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Assets", "Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom="line", colour = Public_Capital, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position=c(0.5, .8))
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Public Assets", "Public Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Public_Capital", "percent")
qplot(year, percent, data=f33dat, geom="line", colour = Public_Capital, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position=c(0.5, .8))
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Public Assets", "Public Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Capital", "percent")
qplot(year, percent, data=f33dat, geom="line", colour = Capital, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position=c(0.5, .8))
f33dat <- tab[, c("year","public_ass", "public_debt")]
names(f33dat) <- c("year", "Public Assets", "Public Debt")
f33dat <- melt(f33dat, id.var="year")
names(f33dat) <- c("year", "Capital", "percent")
qplot(year, percent, data=f33dat, geom="line", colour = Capital, xlab= "Year", ylab= "Public assets and debt (% national income)") + scale_y_continuous(labels = percent, limits = c(0, 2.5)) +
ggtitle("Figure 3.3. Public wealth in Britain, 1700-2010") + theme(legend.position=c(0.5, .8))
f31dat <- tab[,c("year","nat_land", "nat_house", "nat_dom", "nat_foreign")]
names(f31dat) <- c("year","Agricultural land","Housing", "Other Domestic Capital", "Net foreign capital")
# Make the data long for stacking
f31dat <- melt(f31dat, id.var="year")
names(f31dat) <- c("year","capital_type","percent")
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack",
fill = capital_type, xlab= "Year", ylab= "Value of National Capital (% National Income)") + scale_y_continuous(labels = percent, limits = c(0, 8)) +
ggtitle("Figure 3.1. Capital in Britain, 1700-2010") + theme(legend.position="bottom")
head(f31dat)
f31dat
## Table TS3.1
tab32 = read.xlsx("../Piketty2014FiguresTables/Chapter3TablesFigures.xlsx",sheetName="TS3.2",rowIndex=9:19,colIndex=1:10,header=FALSE)
## Table TS3.1
tab32 = read.xlsx("../Piketty2014FiguresTables/Chapter3TablesFigures.xlsx",sheetName="TS3.2",rowIndex=9:19,colIndex=1:10,header=FALSE)
names(tab) =  c("year","nat","nat_land", "nat_house", "nat_dom", "nat_foreign", "public", "public_ass", "public_debt", "private")
tab32
f32dat <- tab32[,c("year","nat_land", "nat_house", "nat_dom", "nat_foreign")]
names(f32dat) <- c("year","Agricultural land","Housing", "Other Domestic Capital", "Net foreign capital")
# Make the data long for stacking
f32dat <- melt(f32dat, id.var="year")
names(f32dat) <- c("year","capital_type","percent")
qplot(year, percent, data=f32dat, geom="ribbon", position = "stack",
fill = capital_type, xlab= "Year", ylab= "Value of National Capital (% National Income)") + scale_y_continuous(labels = percent, limits = c(0, 8)) +
ggtitle("Figure 3.1. Capital in Britain, 1700-2010") + theme(legend.position="bottom")
## Table TS3.1
tab32 = read.xlsx("../Piketty2014FiguresTables/Chapter3TablesFigures.xlsx",sheetName="TS3.2",rowIndex=9:19,colIndex=1:10,header=FALSE)
names(tab32) =  c("year","nat","nat_land", "nat_house", "nat_dom", "nat_foreign", "public", "public_ass", "public_debt", "private")
f31dat <- tab[,c("year","nat_land", "nat_house", "nat_dom", "nat_foreign")]
names(f31dat) <- c("year","Agricultural land","Housing", "Other Domestic Capital", "Net foreign capital")
# Make the data long for stacking
f31dat <- melt(f31dat, id.var="year")
names(f31dat) <- c("year","capital_type","percent")
qplot(year, percent, data=f31dat, geom="ribbon", position = "stack",
fill = capital_type, xlab= "Year", ylab= "Value of National Capital (% National Income)") + scale_y_continuous(labels = percent, limits = c(0, 8)) +
ggtitle("Figure 3.1. Capital in Britain, 1700-2010") + theme(legend.position="bottom")
head(tab)
fdat <- tab[, c("year","nat", "public", "private")]
names(fdat) <- c("year", "National Capital (Public + Private)", "Public", "Private")
fdat <- melt(fdat, id.var="year")
names(fdat) <- c("year", "Capital_Type", "percent")
source('~/.active-rstudio-document', echo=TRUE)
seq(1700, 2010, by=30)
seq(1700, 2010, by=20)
seq(1700, 2020, by=20)
knit("chapter3.Rmd")
library(knitr)
knit("chapter3.Rmd")
knit("chapter3.Rmd")
knit("chapter3.Rmd")
knit("chapter3.Rmd")
knit2html("chapter3.Rmd")
slide <- function(fname) {
require(slidify)
require(knitr)
slidify(fname)
fname <- gsub(".Rmd", ".html", fname)
system(sprintf('open %s', fname))
}
oknit <- function(fname, ...) {
require(knitr)
knit2html(fname, envir = new.env(), ...)
fname <- gsub(".Rmd", ".html", fname)
system(sprintf('open %s', fname))
}
oknit("chapter3.Rmd")
head(tab2)
tab2
tab32
tab
run_35_36 = function(tab, num, country){
fdat <- tab[, c("year","nat", "public", "private")]
names(fdat) <- c("year", "National Capital (Public + Private)", "Public", "Private")
fdat <- melt(fdat, id.var="year")
names(fdat) <- c("year", "Capital_Type", "percent")
}
fdat <- tab[, c("year","nat", "public", "private")]
names(fdat) <- c("year", "National Capital (Public + Private)", "Public", "Private")
fdat <- melt(fdat, id.var="year")
names(fdat) <- c("year", "Capital_Type", "percent")
fdat
qplot(year, percent, data=fdat, geom="line", colour = Capital_Type, xlab= "Year"),
qplot(year, percent, data=fdat, geom="line", colour = Capital_Type, xlab= "Year")
qplot(year, percent, data=fdat, geom="line", colour = Capital_Type, xlab= "Year"), ylab= "National, private and public capital (% national income)") + scale_y_continuous(labels = percent, limits = c(0, 2.5))
qplot(year, percent, data=fdat, geom="line", colour = Capital_Type, xlab= "Year", ylab= "National, private and public capital (% national income)") + scale_y_continuous(labels = percent, limits = c(0, 2.5))
fdat <- tab[, c("year","nat", "public", "private")]
names(fdat) <- c("year", "National Capital (Public + Private)", "Public", "Private")
fdat <- melt(fdat, id.var="year")
names(fdat) <- c("year", "Capital_Type", "percent")
qplot(year, percent, data=fdat, geom="line", colour = Capital_Type, xlab= "Year", ylab= "National, private and public capital (% national income)") + scale_y_continuous(labels = percent, limits = c(-2, 9)) +
ggtitle(paste0("Figure ", num, ". Private and public capital in ", country, ", 1700-2010")) + theme(legend.position=c(0.5, .8)) + scale_x_continuous(breaks = seq(1700, 2010, by=20))
oknit("chapter3.Rmd")
oknit("chapter3.Rmd")
oknit("chapter3.Rmd")
oknit("chapter3.Rmd")
oknit("chapter3.Rmd")
setwd("../Chapter4/")
## Table TS4.1
tab = read.xlsx("../Piketty2014FiguresTables/Chapter4TablesFigures.xlsx",sheetName="TS4.1",rowIndex=9:19,colIndex=1:10,header=FALSE)
names(tab) =  c("year","nat","nat_land", "nat_house", "nat_dom", "nat_foreign", "public", "public_ass", "public_debt", "private")
tab
## Table TS4.1
tab = read.xlsx("../Piketty2014FiguresTables/Chapter4TablesFigures.xlsx",sheetName="TS4.1",rowIndex=9:17,colIndex=1:10,header=FALSE)
names(tab) =  c("year","nat","nat_land", "nat_house", "nat_dom", "nat_foreign", "public", "public_ass", "public_debt", "private")
tab
tab42 = read.xlsx("../Piketty2014FiguresTables/Chapter3TablesFigures.xlsx",sheetName="TS4.2",rowIndex=9:17,colIndex=1:10,header=FALSE)
names(tab42) =  c("year","nat","nat_land", "nat_house", "nat_dom", "nat_foreign", "public", "public_ass", "public_debt", "private")
## Table TS4.2
tab42 = read.xlsx("../Piketty2014FiguresTables/Chapter4TablesFigures.xlsx",sheetName="TS4.2",rowIndex=11:21,colIndex=1:10,header=FALSE)
names(tab42) =  c("year","nat","nat_land", "nat_house", "nat_dom", "nat_foreign", "public", "public_ass", "public_debt", "private")
tab42
q('no')
