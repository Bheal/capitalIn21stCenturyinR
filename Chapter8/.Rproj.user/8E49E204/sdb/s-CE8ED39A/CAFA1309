{
    "contents" : "Capital in the 21st Century: Chapter 9\n========================================================\n\n### Data provenance\n\nThe data were downloaded as Excel files from: http://piketty.pse.ens.fr/en/capital21c2. \n\n### Loading relevant libraries and data\n\nThis document depends on the [xlsx](http://cran.r-project.org/web/packages/xlsx/index.html), [reshape2](http://cran.r-project.org/web/packages/reshape2/index.html), and [ggplot2](http://cran.r-project.org/web/packages/ggplot2/index.html) packages.\n\n\n```{r loadCh0,message=FALSE}\nlibrary(ggplot2)\nlibrary(xlsx)\nlibrary(reshape2)\n```\n\n## Figures 9.1 and Supplementary Figures\n\nThese figures are based on Table TS9.1. Here we read\ndata from the excel file and name the data series\n\n```{r tabTS9.1, dependson=\"loadCh0\", message=FALSE}\n## Table TS9.1\nts91 = read.xlsx(\"../Piketty2014FiguresTables/Chapter9TablesFigures.xlsx\",sheetName=\"TS9.1\",rowIndex=7:70,colIndex=1:8,header=FALSE)\nnames(ts91) = c(\"year\",\"france_francs_cur\",\"france_euros_cur\", \"france_euros_2013\", \"france_cpi\", \"us_dollars_cur\", \"us_dollars_2013\", \"us_cpi\")\n```\n\nThe caption of the table lists the sources for this table\nas \n\n> Sources. France: file \"IPP-prelevements-sociaux-avril2012.xls\" \n> available on www.ipp.eu (we selected the values corresponding to January the 1st of each year; the\n> complete revaluation series are given in the IPP table)\n> USA: official series of Bureau of Labor Statistics (we \n> selected the values corresponding to January the 1st of \n> each year; the complete revaluation series are given in \n> the BLS file)\n> (consumer price index for France et US from Piketty-Zucman 2013, \n> files France.xls et USA.xls; links frozen on 2-20-13)\n\nNow we make Figure F9.1\n\n```{r figF9.1, dependson=\"tabTS9.1\", fig.width=8, fig.height=4}\nf91dat <- ts91[,c(\"year\",\"france_euros_2013\", \"us_dollars_2013\")]\nnames(f91dat) <- c(\"year\",\"France\",\"USA\")\n\n# ggplot2 doesn't support plots with 2 y axes \n# so it only shows wages in Euros\n\n# scale to trick the two axes plot\nf91dat$USA <- f91dat$USA / 1.2\nf91dat <- melt(f91dat, id.var=\"year\")\nnames(f91dat) <- c(\"year\",\"country\",\"wage\")\n\nplt <- ggplot(data=f91dat,aes(x=year, y=wage,group=country)) \nplt <- plt + geom_line() + geom_point(aes(shape=country))\nplt <- plt + scale_y_continuous(breaks=seq(0,10), limits=c(0,10), name=\"Hourly minimum wage\") \nplt <- plt + scale_x_continuous(breaks=seq(1950,2015,by=5), name=\"\")\nplt <- plt + ggtitle(\"Figure 9.1. Minimum wage in France and the U.S., 1950-2013\")\nplt\n```\n\nAnd Figures S9.1 and S9.2\n\n```{r figs9.1, dependson=\"tabTS9.1\", fig.width=8, fig.height=4}\nfs91dat <- ts91[,c(\"year\",\"france_euros_2013\", \"france_euros_cur\")]\nnames(fs91dat) <- c(\"year\", \"2013 euros\", \"current euros\")\nfs91dat <- melt(fs91dat, id.var=\"year\")\nnames(fs91dat) <- c(\"year\", \"currency\", \"wage\")\n\nplt <- ggplot(data=fs91dat, aes(x=year,y=wage,group=currency))\nplt <- plt + geom_line() + geom_point(aes(shape=currency))\nplt <- plt + scale_y_continuous(name=\"Hourly minimum wage\", limits=c(0,10), breaks=seq(0,10,by=1))\nplt <- plt + scale_x_continuous(name=\"\", limits=c(1950,2013), breaks=seq(1950,2015,by=5))\nplt <- plt + ggtitle(\"Figure S9.1. Minimum wage in France, 1950-2013\")\n\nplt\n```\n\n```{r figs9.2, dependson=\"tabTS9.1\", fig.width=8, fig.height=4}\nfs92dat <- ts91[,c(\"year\",\"us_dollars_2013\", \"us_dollars_cur\")]\nnames(fs92dat) <- c(\"year\", \"2013 dollars\", \"current dollars\")\nfs92dat <- melt(fs92dat, id.var=\"year\")\nnames(fs92dat) <- c(\"year\", \"currency\", \"wage\")\n\nplt <- ggplot(data=fs92dat, aes(x=year,y=wage,group=currency))\nplt <- plt + geom_line() + geom_point(aes(shape=currency))\nplt <- plt + scale_y_continuous(name=\"Hourly minimum wage\", limits=c(0,10), breaks=seq(0,10,by=1))\nplt <- plt + scale_x_continuous(name=\"\", limits=c(1950,2013), breaks=seq(1950,2015,by=5))\nplt <- plt + ggtitle(\"Figure S9.2. Minimum wage in USA, 1950-2013\")\n\nplt\n```\n\n",
    "created" : 1404154281668.000,
    "dirty" : false,
    "encoding" : "UTF-8",
    "folds" : "",
    "hash" : "1073240706",
    "id" : "CAFA1309",
    "lastKnownWriteTime" : 1404154129,
    "path" : "C:/Users/schoub1/Desktop/GitHub/capitalIn21stCenturyinR/Chapter8/chapter9.Rmd",
    "project_path" : "chapter9.Rmd",
    "properties" : {
    },
    "source_on_save" : false,
    "type" : "r_markdown"
}